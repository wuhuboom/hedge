
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>用户列表</title>
    <link rel="stylesheet" href="../../assets/libs/layui/css/layui.css"/>
    <link rel="stylesheet" href="../../assets/module/admin.css?v=318"/>
    <script src="../../assets/js/moment.js"></script>

    <style>

        .currSerachBtn{
            box-shadow: 0 15px 18px -6px rgb(45 140 240 / 65%) !important;
        }

        .currReloadBtn{
            box-shadow: 0 15px 18px -6px rgb(146 109 222 / 65%) !important;
        }

        .layui-table-cell{
            height:46px;
            line-height: 46px;

            /*height: auto ;*/
            /*white-space: normal;*/
            /*word-wrap:break-word;*/
        }

        .paidcolor{
            /*color: #fa709a;*/
            background: #fa709a;
        }

        .paycolor{
            background: #6739b6;
        }

    </style>


    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<!-- 正文开始 -->
<div class="layui-fluid">
    <div class="layui-col-md12 layui-col-sm6">
        <div class="layui-card">
            <div class="layui-card-header" style="font-weight: bold">基本信息</div>
            <div class="layui-card-body">
                <table class="layui-table layui-text">
                    <colgroup>
                        <col width="145">
                        <col width="440">
                        <col width="180">
                        <col>
                    </colgroup>
                    <tbody>
                    <tr>
                        <td>代理号</td>
                        <td id="Username"></td>
                        <td>登录密码</td>
                        <td id="Password"></td>
                    </tr>
                    <tr>
                        <td>Token</td>
                        <td id="Token"></td>
                        <td>代理id</td>
                        <td id="AgencyRunnerId"></td>
                    </tr>

                    <tr>
                        <td>状态</td>
                        <td id="Status"></td>
                        <td>代付开关</td>
                        <td id="PaySwitch"></td>
                    </tr>

                    <tr>
                        <td>邀请码</td>
                        <td id="InvitationCode"></td>
                        <td>注册时间</td>
                        <td id="RegisterTime"></td>
                    </tr>

                    <tr>
                        <td>上级玩家</td>
                        <td id="Superior"></td>
                        <td>等级树</td>
                        <td id="LeverTree"></td>
                    </tr>

                    <tr>
                        <td>活跃分数</td>
                        <td id="ActiveGrade"></td>
                        <td>信用分</td>
                        <td id="CreditScore"></td>
                    </tr>

                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="layui-col-md12 layui-col-sm6">
        <div class="layui-card">
            <div class="layui-card-header" style="font-weight: bold">金额信息</div>
            <div class="layui-card-body">
                <table class="layui-table layui-text">
                    <colgroup>
                        <col width="180">
                        <col width="400">
                        <col width="180">
                        <col>
                    </colgroup>
                    <tbody>
                    <tr>
                        <td>押金金额</td>
                        <td id="CashPledge"></td>
                        <td>代收盈利点</td>
                        <td id="CollectionPoint"></td>
                    </tr>
                    <tr>
                        <td>代收额度</td>
                        <td id="CollectionLimit"> </td>
                        <td>代付盈利点</td>
                        <td id="PayPoint">
                    </tr>

                    <tr>
                        <td>提现手续费</td>
                        <td id="WithdrawCommission"></td>
                        <td>代付额度</td>
                        <td id="PayLimit"></td>
                    </tr>

                    <tr>
                        <td>佣金</td>
                        <td id="Commission"> </td>
                        <td>提现冻结金额</td>
                        <td id="FreezeMoney"></td>
                    </tr>
                    <tr>
                        <td>下级税点</td>
                        <td id="JuniorPoint"> </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
<!--    <div class="layui-col-md12 layui-col-sm6">-->
<!--        <div class="layui-card">-->
<!--            <div class="layui-card-header" style="font-weight: bold">通道</div>-->
<!--            <div class="layui-card-body">-->
<!--                <table class="layui-table layui-text">-->
<!--                    <colgroup>-->
<!--                        <col width="180">-->
<!--                        <col>-->
<!--                    </colgroup>-->
<!--                    <tbody>-->
<!--                    <tr>-->
<!--                        <td>代付渠道</td>-->
<!--                        <td id="PaymentChannel"></td>-->
<!--                    </tr>-->
<!--                    <tr>-->
<!--                        <td>代收渠道</td>-->
<!--                        <td id="ProofOfPayment"></td>-->
<!--                    </tr>-->

<!--                    <tr>-->
<!--                        <td>网关地址</td>-->
<!--                        <td id="gateway_address"></td>-->
<!--                    </tr>-->
<!--                    <tr>-->
<!--                        <td>支付秘钥</td>-->
<!--                        <td id="payment_key"></td>-->
<!--                    </tr>-->
<!--                    <tr>-->
<!--                        <td>白名单</td>-->
<!--                        <td id="whitelist"></td>-->
<!--                    </tr>-->
<!--                    </tbody>-->
<!--                </table>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
    <div class="layui-col-md12 layui-col-sm6" style="margin-bottom: 10px">
        <div class="layui-card">
            <div class="layui-card-header" style="font-weight: bold">记录</div>
            <div class="layui-card-body">
                <table class="layui-table layui-text">
                    <colgroup>
                        <col width="180">
                        <col>
                    </colgroup>
                    <tbody>
                    <tr>
                        <td>最后一次登录时间</td>
                        <td id="LastLoginTime"></td>
                    </tr>
                    <tr>
                        <td>最后登录ip</td>
                        <td id="LastLoginIp"> </td>
                    </tr>

                    <tr>
                        <td>最后一次登录地区</td>
                        <td id="LastLoginRegion"> </td>
                    </tr>

                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>


<!-- js部分 -->
<script type="text/javascript" src="../../assets/libs/layui/layui.js"></script>
<script type="text/javascript" src="../../assets/js/common.js?v=318"></script>

<script type="text/javascript" src="../../assets/js/jquery.min.js"></script>
<script type="text/javascript" src="../../assets/js/jquery.cookie.min.js"></script>
<script type="text/javascript" src="../../assets/js/config.url.js"></script>


<!--数据表格操作工具栏-->
<script type="text/html" id="orderListBar">
    <a class="layui-btn layui-btn-sm layui-btn-radius" lay-event="callbacksuccess" style="background-color: #ffba00"><i class="layui-icon layui-icon-ok"></i>回调成功</a>
    <a class="layui-btn layui-btn-sm layui-btn-radius " lay-event="deleteBtn" style="background-color: #f96868 "><i class="layui-icon layui-icon-delete"></i>详情</a>
</script>

<script>

    var mybck= $.cookie('tokenMyb_acting');
    //alert(document.cookie);
    // console.log(mybck)
    if(mybck == "" || mybck == null){

        window.top.location.href="../../login.html";

    }else{

        var channel
        // var channel_name
        //
        // var param = {};
        // param.page = 1
        // param.limit = 3000
        // //获取通道
        // $.ajax({
        //   url: global_requestAddress + global_requestAddress_js_channel + "?action=check",
        //   headers: {
        //     "token": mybck
        //   },
        //   dataType: 'json',
        //   type: 'post',
        //   data: param,
        //   success:function (res) {
        //     channel = res.result
        //     // console.log("channel1",channel)
        //   }
        // })

        // var currParentDatas = eval('(' + parent.jsondata + ')')
        var VIPID = eval('(' + parent.jsondata + ')')
        var currParentDatas
        // var currChannelData = eval('(' + parent.jsonPayPaidData + ')')
        // channel = currChannelData.channelData




        var bankListArr = []

        var currDateVal
        var currDateVal_end
        var local_storage_key = 'pay_order_list_t_list';


        var payChannelArrS = []
        var payingChannelArrS = []

        layui.use(['layer', 'form', 'table', 'util', 'admin', 'xmSelect','notice','treeTable','laydate'], function () {
            var $ = layui.jquery;
            var layer = layui.layer;
            var form = layui.form;
            var table = layui.table;
            var util = layui.util;
            var admin = layui.admin;
            var xmSelect = layui.xmSelect;
            var notice = layui.notice;
            var treeTable = layui.treeTable
            var laydate = layui.laydate;

            // console.log("currParentDatas",currParentDatas)
            var param = {};
            param['id']= VIPID.ID
            param['limit']= 10
            param['page']= 1

            $.ajax({
                url: global_requestAddress + global_requestAddress_js_runnerOperation + "?action=one",
                headers: {
                    "token": mybck
                },
                dataType: 'json',
                type: 'post',
                data: param,
                success:function (res) {
                    currParentDatas = res.result

                    console.log('currParentDatas',currParentDatas)

                    //基本信息
                    $("#Username").text(currParentDatas.Username)//代理号
                    $("#Password").text(currParentDatas.Password)//登录密码
                    $("#AgencyRunnerId").text(currParentDatas.AgencyRunnerId)//代理id

                    var WithdrawCommission = ''
                    if ((currParentDatas.WithdrawCommission*1) >0){
                        if ( currParentDatas.WithdrawCommission == 0.07){
                                WithdrawCommission="7%"
                        }else {
                                WithdrawCommission=currParentDatas.WithdrawCommission*100+"%"
                        }
                    }else {
                        WithdrawCommission =0
                    }
                    $("#WithdrawCommission").append(WithdrawCommission)//提现手续费
                    var statusHtml = ''
                    if(currParentDatas.Status === 1){
                        statusHtml ='<span class="layui-badge " style="background-color: #337ab7;border-color: #337ab7;">正常</span>'
                    }else if(currParentDatas.Status === 2){
                        statusHtml ='<span class="layui-badge " style="background-color: #f3ba44;border-color: #f3ba44;">禁用</span>'
                    }
                    $("#Status").append(statusHtml)//类型

                    var PaySwitchHtml = ''
                    if(currParentDatas.PaySwitch === 1){
                        PaySwitchHtml ='<span class="layui-badge " style="background-color: #b7b533;border-color: #b733b0;">开</span>'
                    }else if(currParentDatas.PaySwitch === 2){
                        PaySwitchHtml ='<span class="layui-badge " style="background-color: #f3ba44;border-color: #f3ba44;">关</span>'
                    }
                    $("#PaySwitch").append(PaySwitchHtml)//代付开关
                    $("#Token").text(currParentDatas.Token)//Token
                    $("#InvitationCode").text(currParentDatas.InvitationCode)//邀请码

                    //注册时间
                    $("#RegisterTime").text(moment(currParentDatas.RegisterTime * 1000).utc().utcOffset(currTimeZoneValue).format('YYYY-MM-DD HH:mm:ss'))
                    $("#Superior").text(currParentDatas.Superior)//上级玩家
                    $("#LeverTree").text(currParentDatas.LeverTree)//LeverTree

                    $("#ActiveGrade").text(currParentDatas.ActiveGrade)//活跃分数
                    $("#CreditScore").text(currParentDatas.CreditScore)//信用分

                    //金额信息
                    $("#CashPledge").text(currParentDatas.CashPledge)//押金金额

                    var CollectionPoint = ''
                    if ((currParentDatas.CollectionPoint*1) >0){
                        if ( currParentDatas.CollectionPoint == 0.07){
                                CollectionPoint="7%"
                        }else {
                                CollectionPoint=currParentDatas.CollectionPoint*100+"%"
                        }
                    }else {
                        CollectionPoint =0
                    }
                    $("#CollectionPoint").append(CollectionPoint)//代收盈利点

                    $("#CollectionLimit").text(currParentDatas.CollectionLimit)//代收额度

                    var PayPoint = ''
                    if ((currParentDatas.PayPoint*1) >0){
                        if (currParentDatas.PayPoint == 0.07){
                                PayPoint="7%"
                        }else {
                                PayPoint=currParentDatas.PayPoint*100+"%"
                        }
                    }else {
                        PayPoint =0
                    }
                    $("#PayPoint").append(PayPoint)//代付盈利点

                    $("#PayLimit").text(currParentDatas.PayLimit)//代付额度
                    $("#Commission").text(currParentDatas.Commission)//佣金
                    $("#FreezeMoney").text(currParentDatas.FreezeMoney)//提现冻结金额


                    var JuniorPoint = ''
                    if ((currParentDatas.JuniorPoint*1) >0){
                        if (currParentDatas.JuniorPoint == 0.07){
                                JuniorPoint="7%"
                        }else {
                                JuniorPoint=currParentDatas.JuniorPoint*100+"%"
                        }

                    }else {
                        JuniorPoint =0
                    }
                    $("#JuniorPoint").append(JuniorPoint)//下级税点

                    $("#LastLoginTime").text(moment(currParentDatas.LastLoginTime  * 1000).utc().utcOffset(currTimeZoneValue).format('YYYY-MM-DD HH:mm:ss'))//最后一次登录时间



                    $("#LastLoginIp").text(currParentDatas.LastLoginIp)//最后登录ip
                    $("#LastLoginRegion").text(currParentDatas.LastLoginRegion)//最后一次登录地区



                    $("#payment_key").text(currParentDatas.ApiKey)//支付秘钥
                    $("#whitelist").text(currParentDatas.WhiteIps)//白名单

                    $("#Created").text(moment(currParentDatas.Created * 1000).utc().utcOffset(currTimeZoneValue).format('YYYY-MM-DD HH:mm:ss'))
                    $("#Updated").text(moment(currParentDatas.Updated * 1000).utc().utcOffset(currTimeZoneValue).format('YYYY-MM-DD HH:mm:ss'))

                }
            })




            //
            // console.log("currParentDatas",currParentDatas)

            // //代收
            // let ipsArr = currParentDatas.PayChannel.split('@')
            // console.log("ipsArr",ipsArr)
            // //代付
            // let ipsArr1 =currParentDatas.PaidChannel.split('@')
            //
            // //代付通道
            // for (var i=0;i<channel.length;i++){
            //
            //     if (channel[i].Kinds == "2"){
            //         for (var a=0;a<ipsArr1.length;a++){
            //             if (channel[i].ID == ipsArr1[a]){
            //                 payChannelArrS.push(channel[i].ChannelName)
            //             }
            //         }
            //     }
            //
            //     //代收通道
            //     else if (channel[i].Kinds == "1"){
            //         for (var b=0;b<ipsArr.length;b++){
            //             if (channel[i].ID == ipsArr[b]){
            //                 payingChannelArrS.push(channel[i].ChannelName)
            //             }
            //         }
            //
            //     }
            // }
            //
            // // channel.result.forEach((item,index)=>{
            // //   if(item.Kinds == '1'){
            // //     console.log("代付",item)
            // //     ipsArr1.forEach((itemE,index)=>{
            // //         if(item.ID == itemE){
            // //           payingChannelArrS.push(item.ChannelName)
            // //         }
            // //     })
            // //   }else{
            // //     ipsArr.forEach((itemE,index)=>{
            // //       if(item.ID == itemE){
            // //         payChannelArrS.push(item.ChannelName)
            // //       }
            // //     })
            // //   }
            // // })
            //
            //
            // //代付通道
            // let Name1 = payChannelArrS
            // let ipsHtml1 = ""
            // Name1.forEach((item,index)=>{
            //     if(index == 0){
            //         ipsHtml1 = ipsHtml1 +'<span class="layui-badge paycolor" > ' + item + '</span>'
            //     }else{
            //         ipsHtml1 = ipsHtml1 + '<span class="layui-badge paycolor" style=\'margin-left: 10px\'> ' + item + '</span>'
            //     }
            // })
            // $("#PaymentChannel").append(ipsHtml1)
            //
            // //代收渠道
            // let Name = payingChannelArrS
            // let ipsHtml = ""
            // Name.forEach((item,index)=>{
            //     if(index == 0){
            //         ipsHtml = ipsHtml +'<span class="layui-badge paidcolor" > ' + item + '</span>'
            //     }else{
            //         ipsHtml = ipsHtml + '<span class="layui-badge paidcolor" style=\'margin-left: 10px\'> ' + item + '</span>'
            //     }
            // })
            // $("#ProofOfPayment").append(ipsHtml)


        });

    }



</script>
</body>
</html>
